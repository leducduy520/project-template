name: GitHub actions features
on:
  workflow_dispatch:
    inputs:
      hello:
        description: "Input a name"
        required: true
        default: "duyld"
        type: string
      enable_print:
        description: "Enable show point"
        required: true
        type: boolean
      work_environment:
        description: "Additional informations for printing"
        required: false
        type: environment
env:
  WORKFLOW_ENV: duyleduc520
jobs:
  Create-Output:
    runs-on: ubuntu-latest
    outputs:
      duylove: ${{steps.save.outputs.mylove}}
    steps:
      - name: save value to output
        id: save
        run: echo "mylove=A" >> $GITHUB_OUTPUT
  Read-Output:
    runs-on: ubuntu-latest
    needs: Create-Output
    steps:
      - name: print previous job's output value
        run: echo "Duy's love is ${{needs.Create-Output.outputs.duylove}}"
  Read-Secret-Env:
    runs-on: ubuntu-latest
    env:
      JOB_ENV: tta_in_my_heart
    steps:
      - name: Print DUY_SECRET_NAME
        run: echo "${{secrets.DUY_SECRET_NAME}}"
      - name: Print workflow env var
        run: echo "${{env.WORKFLOW_ENV}}"
      - name: Print job env var
        run: echo "$JOB_ENV"
  Read-Environment-Secret:
    runs-on: ubuntu-latest
    environment: testing
    steps:
      - name: Print
        run: echo "${{secrets.TEST_SECRET}}"
  If-and-Input:
    runs-on: ubuntu-latest
    steps:
      - name: Print github
        run: echo "${{toJson(github.event.sender)}}"
      - name: Print string input
        if: ${{github.event.sender.login == 'leducduy520'}}
        run: echo "${{inputs.hello}}"
      - name: Print point
        if: ${{inputs.enable_print}}
        run: echo "The point is 10 in the environment ${{inputs.work_environment}}"
  Test-Strategy:
    strategy:
      matrix:
        version: [10, 11, 12]
        os: [ubuntu, windows, mac]
    runs-on: ubuntu-latest
    steps:
      - name: Run matrix
        run: echo "this app version ${{matrix.version}} run on os ${{matrix.os}}"
