name: Builder
description: 'For building'
author: duyld15
inputs:
  preset:
    description: 'Cmake preset to be built'
    required: true
runs:
  using: 'composite'
  steps:
    - name: Build mongocxx-driver for linux
      if: ${{ inputs.preset == 'ubuntu'}}
      run: make mongo-gcc
      shell: bash
    - name: Build mongocxx-driver for windows
      if: ${{ inputs.preset == 'msvc' }}
      run: make mongo-msvc
      shell: bash
    - name: Configure Project
      run: make configure PRESET=${{ inputs.preset }}
      shell: bash
    - name: Build Project for windows
      if: ${{ inputs.preset == 'msvc' }}
      run: cmake --build --preset=${{ inputs.preset }}-reldebinfo
      shell: bash
    - name: Build Project for linux
      if: ${{ inputs.preset == 'ubuntu'}}
      run: cmake --build --preset=${{ inputs.preset }}
      shell: bash